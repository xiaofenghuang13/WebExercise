<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Promise对象</title>
</head>
<body>
<script type="text/javascript">
	// Promise 对象 - 代表了未来某个将要发生的事件（通常是一个异步操作）
	//	- 有了 Promise 对象，可以将异步操作以同步的流程表达出来，避免了层层嵌套的回调函数（俗称'回调地狱'）
	//	- ES6 的 Promise 是一个构造函数，用来生成 promise 实例
	// 	- promise对象的三个状态
	//		* pending: 初始化状态
	//		* fullfilled: 成功状态
	//		* rejected: 失败状态

	//	- 应用：
	//		* 使用 promise 实现超时处理
	//		* 使用 promise 封装处理Ajax请求
	//		let request = new XMLHttpRequest();

	// 创建 promise 基本步骤：
	//	1、创建 promise 对象
	let promise = new Promise((resolve, reject) => {
		// 初始化promise状态为pending
		// 执行异步操作
		console.log('111');
		// 执行异步操作，通常是发送Ajax请求
		setTimeout(() => {
			console.log('333');
			// 异步任务执行成功
			// resolve('笑呵呵');	// 修改promise的状态为fullfilled
			// 异步任务执行失败
			reject('哭唧唧');	// 修改promise的状态为rejected
		}, 2000);
	});
	//	2、调用promise的then
	promise.then(
		res => {
			// 成功的回调
			console.log(res, '成功了...');
		}, err => {
			// 失败的回调
			console.log(err, '失败了...');
		}
	);
	console.log('222');
</script>
</body>
</html>
